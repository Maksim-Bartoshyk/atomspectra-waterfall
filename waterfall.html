<html>
	<head>
		<link rel="stylesheet" href="./html/style.css" />
		<script>
			// error console
			window.onerror = function(msg, url, lineNo, columnNo, error) {
				const div = document.createElement('div');
				div.className = "row error";
				div.innerText = msg + ' (line: ' + lineNo + ', column: ' + columnNo + ')';
				document.body.appendChild(div);
			};
		</script>
		<script>
			window.originalWaterfallData = 'waterfall-data-placeholder';
			window.exports = {}; // hack to re-use nodejs modules
			window.require = () => window.exports;
		</script>
		<script src="./shared/spectrum.js"></script>
		<script src="./shared/waterfall-data.js"></script>
		<script src="./shared/radiacode.js"></script> <!-- to be replaced with atom.js -->
	</head>
	<body>
		<div id="blocking-overlay" class="blocking-overlay"></div>
		<div id="upload-control" class="upload-control">
			<span>Atomspectra file:</span>
			<input id="file-input" class="file-input" type="file" accept=".txt" name="files">
			<label for="import-channel-binning">Import channel binning:</label>
			<select name="import-channel-binning" id="import-channel-binning">
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="4" selected>4</option>
				<option value="8">8</option>
				<option value="16">16</option>
				<option value="32">32</option>
			</select>
			| <input type="checkbox" id="v-6.6.14" name="v-6.6.14"/>
			<label for="v-6.6.14">6.6.14</label>
		</div>
		<div id="file-info-container" class="upload-control">
			<span id="file-info"></span>
		</div>
		<div id="waterfall-control" class="waterfall-control">
			<div class="row">
				<div class="col">
					<input type="radio" id="lin" name="scale" value="lin">
					<label for="lin">LIN</label>
					<input type="radio" id="sqrt" name="scale" value="sqrt" checked>
					<label for="sqrt">SQRT</label>
					<input type="radio" id="log" name="scale" value="log">
					<label for="log">LOG</label>
				</div>
				<div class="col">
					<input type="checkbox" id="blur-waterfall" name="blur-waterfall"/>
					<label for="blur-waterfall">Blur waterfall image</label>
				</div>
				<div class="col">
					<label for="max-cps">Scale maximum:</label>
					<select name="max-cps" id="max-cps">
						<option value="100">100%</option>
						<option value="75">75%</option>
						<option value="50">50%</option>
						<option value="25">25%</option>
						<option value="10">10%</option>
						<option value="5">5%</option>
						<option value="1">1%</option>
					</select>
				</div>
				<div class="col">
					<label for="timezone">Show time as:</label>
					<select name="timezone" id="timezone">
						<option value="-11">-11</option>
						<option value="-10">-10</option>
						<option value="-9">-9</option>
						<option value="-8">-8</option>
						<option value="-7">-7</option>
						<option value="-6">-6</option>
						<option value="-5">-5</option>
						<option value="-4">-4</option>
						<option value="-3">-3</option>
						<option value="-2">-2</option>
						<option value="-1">-1</option>
						<option value="0">UTC</option>
						<option value="local" selected>Local</option>
						<option value="1">+1</option>
						<option value="2">+2</option>
						<option value="3">+3</option>
						<option value="4">+4</option>
						<option value="5">+5</option>
						<option value="6">+6</option>
						<option value="7">+7</option>
						<option value="8">+8</option>
						<option value="9">+9</option>
						<option value="10">+10</option>
						<option value="11">+11</option>
						<option value="12">+12</option>
					</select>
				</div>
			</div>
			<div class="row">
				<div class="col">
					<input type="checkbox" id="subtract-base" name="subtract-base"/>
					<label for="subtract-base">Subtract base spectrum</label>
				</div>
				<div class="col">
					<label for="spectrum-binning">Spectrum binning:</label>
					<input type="number" min="1" value="1" name="spectrum-binning" id="spectrum-binning"/>
				</div>
				<div class="col">
					<label for="channel-binning">Channel binning:</label>
					<select name="channel-binning" id="channel-binning">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="4">4</option>
						<option value="8">8</option>
						<option value="16">16</option>
						<option value="32">32</option>
					</select>
				</div>
				<div class="col">
					<label for="moving-average">Moving average:</label>
					<select name="moving-average" id="moving-average">
						<option value="0">0</option>
						<option value="2">2</option>
						<option value="4">4</option>
						<option value="8">8</option>
						<option value="16">16</option>
						<option value="32">32</option>
					</select>
				</div>
			</div>
		</div>
		<div id="plot-container" class="plot-container">
			<div id="horizontal-cursor" class="horizontal-cursor"></div>
			<div id="vertical-cursor" class="vertical-cursor"></div>
			<div id="waterfall-container" class="waterfall-container">
				<canvas id="waterfall-plot" class="plot" width="662" height="0"></canvas>
			</div>
			<div id="cps-container" class="cps-container">
				<canvas id="cps-plot" class="cps-plot" width="0" height="0"></canvas>
			</div>
		</div>
		<div id="cps-control" class="cps-control">
			<div class="row">
				<button id="render-cps" class="cps-left-column">CPS trend in channel range_1:</button> 
				<input type="number" id="from-channel-1" class="numeric-input"/>-<input type="number" id="to-channel-1" class="numeric-input"/>
				<button id="export-cps-map" class="export-button" disabled>Range_1 cps to map</button>
			</div>
			<div class="row">
				<div class="cps-left-column">
					<input type="checkbox" id="cps-comparison" name="cps-comparison"/>
					<label for="cps-comparison">Compare to CPS in channel range_2:</label>
				</div>
				<input type="number" id="from-channel-2" class="numeric-input"/>-<input type="number" id="to-channel-2" class="numeric-input"/>
				<button id="export-comparison-map" class="export-button" disabled>Range_1/range_2 comparison to map</button>
			</div>
			<div class="row">
				<div class="cps-left-column">
					<input type="checkbox" id="dotted-trend" name="dotted-trend"/>
					<label for="dotted-trend">Dotted</label>
				</div>
				<input type="number" id="from-spectrum" class="numeric-input" placeholder="from index"/>-<input type="number" id="to-spectrum" class="numeric-input" placeholder="to index"/>
				<button id="export-spectrum-range" class="export-button">Spectrogram range to spectrum</button>
			</div>
		</div>
		<script src="./html/common.js"></script>
		<script src="./html/waterfall.js"></script>
		<script src="./html/cps.js"></script>
		<script src="./html/cursor.js"></script>
		<script src="./html/waterfall-control.js"></script>
		<script src="./html/startup.js"></script>
	</body>
</html>